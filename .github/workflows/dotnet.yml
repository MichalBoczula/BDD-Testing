generate-and-push-livingdoc:
  runs-on: ubuntu-latest
  needs: build-and-test

  steps:
  - name: Checkout code
    uses: actions/checkout@v2

  - name: Copy LivingDoc.html from bin folder
    run: cp BDD.AcceptanceTests.SpecFlow/bin/Debug/net7.0/LivingDoc.html LivingDoc.html

  - name: Configure Git
    run: git config --global http.extraHeader "AUTHORIZATION: bearer ${{ secrets.MY_GITHUB_TOKEN }}"

  - name: Commit and push LivingDoc.html to LivingDoc branch
    run: |
      git checkout -b LivingDoc || git checkout LivingDoc
      git add LivingDoc.html
      git commit -m "Update SpecFlow Living Documentation"
      git push -f origin LivingDoc
